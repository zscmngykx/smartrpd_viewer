<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024">
    <title>Case List</title>
    <link rel="stylesheet" href="../../css/case_list.css">
    <link rel="stylesheet" href="../../css/createCase.css">
</head>
<body>

    <div class="container">
        <!-- Â∑¶‰æß‰∏ªÂàóË°® -->
        <div class="case-list">
            <div class="case-header">
                <button class="notifications">üîî NOTIFICATIONS</button>
                <div class="filter">
                    <label for="filter-status">FILTER BY STATUS</label>
                    <select id="filter-status" class="status-dropdown">
                        <option value="all">ALL</option>
                        <option value="draft">DRAFT</option>
                        <option value="pending">PENDING REVIEW</option>
                        <option value="reviewed">REVIEWED</option>
                        <option value="fabricated">FABRICATED</option>
                        <option value="framework_try_in">FRAMEWORK TRY IN</option>
                        <option value="teeth_set_up">TEETH SET UP</option>
                        <option value="teeth_try_in">TEETH TRY IN</option>
                        <option value="completed">COMPLETED</option>
                    </select>
                </div>                
                <button class="create-case">CREATE NEW CASE</button>
                <button class="refresh">‚ü≥ REFRESH</button>
                <button class="logout">LOGOUT</button> 
            </div>

            <!-- <div class="case-tabs">
                <button class="active">FOR CLINICIAN</button>
                <button>FOR LAB</button>
            </div> -->

            <!-- Ë°®Â§¥Áã¨Á´ã -->
            <table class="case-table">
                <thead>
                <tr>
                    <th class="sortable" data-sort="case_id" style="width: 20%;">CASE NAME</th>
                    <th class="sortable" data-sort="creation_date" style="width: 20%;">DATE CREATED</th>
                    <th class="sortable" data-sort="expected_date" style="width: 20%;">DATE EXPECTED</th>
                    <th class="sortable" data-sort="username" style="width: 20%;">CASE OWNER</th>
                    <th class="sortable" data-sort="status" style="width: 22%;">CURRENT STATUS</th>
                </tr>
                </thead>
            </table>
            
            <!-- ÊªöÂä®Âå∫ÂüüÂè™ÂåÖÂê´ tbody -->
            <div class="table-body-wrapper">
                <table class="case-table">
                <tbody>
                    <!-- JS Âä®ÊÄÅÂ°´ÂÖÖ -->
                </tbody>
                </table>
            </div>
  
                    
        </div>

        <!-- Âè≥‰æßËØ¶ÊÉÖÂå∫Âüü -->
        <div class="case-details">
            <div class="case-actions">
                <button class="mark-important">‚≠ê MARK AS IMPORTANT</button>
                <button class="mark-unread">üü¢ UNREAD</button>
            </div>

            <div class="case-thumbnail">
                <img id="caseImage">
            </div>
            <div class="image-navigation">
                <button id="prevBtn">‚óÄ</button>
                <span id="imageCounter">IMAGE 0 OF 0</span>
                <button id="nextBtn">‚ñ∂</button>
            </div>
            
            
            

            <button class="case-dashboard">CASE DASHBOARD</button>

            <div class="case-info">
                <label for="status">STATUS:</label>
                <select id="status">
                    <option value="draft">DRAFT</option>
                    <option value="pending">PENDING REVIEW</option>
                    <option value="reviewed">REVIEWED</option>
                    <option value="fabricated">FABRICATED</option>
                    <option value="framework_try_in">FRAMEWORK TRY IN</option>
                    <option value="teeth_set_up">TEETH SET UP</option>
                    <option value="teeth_try_in">TEETH TRY IN</option>
                    <option value="completed">COMPLETED</option>
                </select>
            
                <p>CASE NAME: <span id="selected-case"></span></p>
                <p>CREATED BY: <span id="created-by"></span></p>
                <p>DATE CREATED: <span id="date-created"></span></p>
                <p>LAST EDITED: <span id="last-edited"></span></p>
            </div>
            

            <div class="start-case-container">
                <button class="start-case-button">START CASE</button>
                <div class="divider"></div> <!-- ËøôÊòØÊñ∞Â¢ûÁöÑÁõ¥Á∫øÂÖÉÁ¥† -->
                <button class="start-case-toggle">‚ò∞</button>
            </div>
            
            
            
        </div>
    </div>
    
    <div id="caseModal" class="modal hidden">
        <div class="modal-content">
            <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->
            <span id="closeCaseModal" class="close-btn">&times;</span>

            <!-- Ê†áÈ¢ò -->
            <h2 class="modal-title">Create a New Case</h2>

            <!-- Ë°®Âçï -->
            <form id="newCaseForm" class="modal-form">
            <!-- Case Name -->
            <label for="caseName" class="input-label">Case Name <span style="color: red;">*</span></label>
            <input type="text" id="caseName" class="modal-input" placeholder="New Case Name" required />

            <!-- Request Date -->
            <label for="requestDate" class="input-label">Request Date</label>
            <div class="input-with-icon">
                <input type="date" id="requestDate" class="modal-input" />
                <span class="calendar-icon">üìÖ</span>
            </div>

            <!-- Uploaded Jaw Models -->
            <label class="input-label">Uploaded Jaw Models</label>
            <div id="uploadedJawModels" class="uploaded-models">
                <div class="upload-placeholder" id="addJawModelBtn">
                <span class="plus-icon">Ôºã</span>
                </div>
            </div>
            <input type="file" id="jawUploadInput" accept=".stl" style="display: none;" />

            <!-- Upload buttons -->
            <div class="upload-buttons">
                <button type="button" class="upload-btn upload-ref">‚¨Ü UPLOAD REFERENCE IMAGES</button>
                <button type="button" class="upload-btn upload-jaw">‚¨Ü UPLOAD JAW MODELS</button>
            </div>

            <!-- Footer buttons -->
            <div class="modal-footer">
                <button type="button" class="cancel-btn">CANCEL</button>
                <button type="submit" class="invite-btn">CREATE AND INVITE USERS</button>
                <button type="submit" class="start-btn">START</button>
            </div>
            </form>
        </div>
    </div>

    
    <script type="module" src="../js/caseManagement.js"></script>
    <script type="module" src="../js/createCase.js"></script>
    <script src="../../dist/bundle.js"></script>

    <script>
        document.querySelector(".logout").addEventListener("click", () => {
            localStorage.removeItem("loggedInUser"); // Ê∏ÖÈô§ÁôªÂΩï‰ø°ÊÅØ
            window.location.href = "../../index.html"; 
        });
    </script>  
</body>
</html>
