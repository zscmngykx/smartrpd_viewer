<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1024">
    <title>Case List</title>
    <link rel="stylesheet" href="../../css/case_list.css">
    <link rel="stylesheet" href="../../css/createCase.css">
</head>
<body>

    <div class="container">
        <!-- Â∑¶‰æß‰∏ªÂàóË°® -->
        <div class="case-list">
            <div class="case-header">
                <button class="notifications">üîî NOTIFICATIONS</button>
                <div class="filter">
                    <label for="filter-status">FILTER BY STATUS</label>
                    <select id="filter-status" class="status-dropdown">
                        <option value="all">ALL</option>
                        <option value="draft">DRAFT</option>
                        <option value="pending">PENDING REVIEW</option>
                        <option value="reviewed">REVIEWED</option>
                        <option value="fabricated">FABRICATED</option>
                        <option value="framework_try_in">FRAMEWORK TRY IN</option>
                        <option value="teeth_set_up">TEETH SET UP</option>
                        <option value="teeth_try_in">TEETH TRY IN</option>
                        <option value="completed">COMPLETED</option>
                    </select>
                </div>                
                <button class="create-case">CREATE NEW CASE</button>
                <button class="refresh">‚ü≥ REFRESH</button>
                <button class="logout">LOGOUT</button> 
            </div>

            <!-- <div class="case-tabs">
                <button class="active">FOR CLINICIAN</button>
                <button>FOR LAB</button>
            </div> -->

            <!-- Ë°®Â§¥Áã¨Á´ã -->
            <table class="case-table">
                <thead>
                <tr>
                    <th class="sortable" data-sort="case_id" style="width: 20%;">CASE NAME</th>
                    <th class="sortable" data-sort="creation_date" style="width: 20%;">DATE REQUESTED</th>
                    <th class="sortable" data-sort="expected_date" style="width: 20%;">DUE DATE</th>
                    <th class="sortable" data-sort="new_status" style="width: 20%;">STATUS</th>         <!-- ‚úÖ ‰øÆÊ≠£Â≠óÊÆµ -->
                    <th class="sortable" data-sort="assigned_to" style="width: 20%;">ASSIGNED TO</th>   <!-- ‚úÖ ‰øÆÊ≠£Â≠óÊÆµ -->
                </tr>
                </thead>
            </table>
            
            <!-- ÊªöÂä®Âå∫ÂüüÂè™ÂåÖÂê´ tbody -->
            <div class="table-body-wrapper">
                <table class="case-table">
                <tbody>
                    <!-- JS Âä®ÊÄÅÂ°´ÂÖÖ -->
                </tbody>
                </table>
            </div>
  
                    
        </div>

        <!-- Âè≥‰æßËØ¶ÊÉÖÂå∫Âüü -->
        <div class="case-details">
            <!-- <div class="case-actions">
                <button class="mark-important">‚≠ê MARK AS IMPORTANT</button>
                <button class="mark-unread">üü¢ UNREAD</button>
            </div> -->
            <div class="case-actions">
            <div class="case-name" id="caseNameDisplay"></div>
            <div class="dropdown-menu-wrapper">
                <button class="dropdown-toggle">‚ãØ</button>
                <div class="dropdown-menu hidden" id="caseDropdown">
                <div class="dropdown-item" id="renameBtn">Rename</div>
                <div class="dropdown-item" id="upload3dBtn">Upload 3D File</div>
                <div class="dropdown-item" id="editUserAccessBtn">Edit User Access</div>
                <div class="dropdown-item" id="viewVersionBtn">View Version History</div>
                <div class="dropdown-item" id="duplicateBtn">Duplicate</div>
                <div class="dropdown-item" id="deleteBtn">Delete</div>
                </div>
            </div>
            </div>


            <div class="case-thumbnail">
                <img id="caseImage">
            </div>
            <div class="image-navigation">
                <button id="prevBtn">‚óÄ</button>
                <span id="imageCounter">IMAGE 0 OF 0</span>
                <button id="nextBtn">‚ñ∂</button>
            </div>
            
            
            

            <button class="case-dashboard">CASE DASHBOARD</button>

            <div class="case-info">
                <label for="status">STATUS:</label>
                <select id="status">
                    <option value="draft">DRAFT</option>
                    <option value="pending">PENDING REVIEW</option>
                    <option value="reviewed">REVIEWED</option>
                    <option value="fabricated">FABRICATED</option>
                    <option value="framework_try_in">FRAMEWORK TRY IN</option>
                    <option value="teeth_set_up">TEETH SET UP</option>
                    <option value="teeth_try_in">TEETH TRY IN</option>
                    <option value="completed">COMPLETED</option>
                </select>
            
                <p>CASE NAME: <span id="selected-case"></span></p>
                <p>CREATED BY: <span id="created-by"></span></p>
                <p>DATE CREATED: <span id="date-created"></span></p>
                <p>LAST EDITED: <span id="last-edited"></span></p>
            </div>
            

            <div class="start-case-container">
                <button class="start-case-button">START CASE</button>
                <div class="divider"></div> <!-- ËøôÊòØÊñ∞Â¢ûÁöÑÁõ¥Á∫øÂÖÉÁ¥† -->
                <button class="start-case-toggle">‚ò∞</button>
            </div>
            
            
            
        </div>
    </div>
    
    <div id="caseModal" class="modal hidden">
        <div class="modal-content">
            <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->
            <span id="closeCaseModal" class="close-btn">&times;</span>

            <!-- Ê†áÈ¢ò -->
            <h2 class="modal-title">Create a New Case</h2>

            <!-- Ë°®Âçï -->
            <form id="newCaseForm" class="modal-form">
            <!-- Case Name -->
            <label for="caseName" class="input-label">Case Name <span style="color: red;">*</span></label>
            <input type="text" id="caseName" class="modal-input" placeholder="New Case Name" required />

            <!-- Request Date -->
            <label for="requestDate" class="input-label">Request Date</label>
            <div class="input-with-icon">
                <input type="date" id="requestDate" class="modal-input" />
                <span class="calendar-icon">üìÖ</span>
            </div>

            <!-- Uploaded Jaw Models -->
            <!-- ÂåÖË£π‰∏§‰∏™‰∏ä‰º†Âå∫ÁöÑÂ§ñÂ±ÇÂÆπÂô® -->
            <div class="upload-sections-row">
            <!-- Â∑¶‰æß Jaw -->
            <div class="upload-section">
            <label class="input-label">Uploaded Jaw Models</label>
            <div id="uploadedJawModels" class="uploaded-models">

                <div class="upload-placeholder" data-jaw="upper">
                    <img src="../../assets/upper.svg" class="jaw-bg" alt="Upper Jaw" />
                    <span class="plus-icon">Ôºã</span>
                </div>

                <div class="upload-placeholder" data-jaw="lower">
                    <img src="../../assets/lower.svg" class="jaw-bg" alt="Upper Jaw" />
                    <span class="plus-icon">Ôºã</span>
                </div>

            </div>
            <input type="file" id="jawUploadInput" accept=".stl" style="display: none;" />
            </div>


            <!-- Âè≥‰æß Reference -->
            <div class="upload-section">
                <label class="input-label">Upload Reference Images</label>
                <div id="uploadedReferenceImages" class="uploaded-models">
                <div class="upload-placeholder" id="addRefImageBtn">
                    <span class="plus-icon">Ôºã</span>
                </div>
                </div>
                <input type="file" id="refImageInput" accept="image/png,image/jpeg" style="display: none;" />
            </div>
            </div>


            <!-- Upload buttons -->
            <!-- <div class="upload-buttons">
                <button type="button" class="upload-btn upload-ref">‚¨Ü UPLOAD REFERENCE IMAGES</button>
                <button type="button" class="upload-btn upload-jaw">‚¨Ü UPLOAD JAW MODELS</button>
            </div> -->

            <!-- Footer buttons -->
            <div class="modal-footer">
                <button type="button" class="cancel-btn">CANCEL</button>
                <button type="button" class="invite-btn">CREATE AND INVITE USERS</button>
                <button type="button" class="start-btn">START</button>
            </div>
            </form>
        </div>
    </div>

    <div id="userAccessModal" class="modal hidden">
        <div class="modal-content">
            <span id="closeUserAccessModal" class="close-btn">&times;</span>
            <h3>User Access</h3>

            <p><strong>Case Name:</strong>
                <span class="case-name-display">‚Äî</span>
            </p>


            <div class="input-with-button">
            <input id="userSearchInput" type="text" placeholder="Search user to add to case" />
            <button id="addUserBtn">ADD</button>
            </div>


            <p><strong>Shared with:</strong></p>
            <ul id="sharedUserList" class="shared-user-list"></ul>

            <div class="modal-actions">
            <button id="cancelInviteBtn" class="cancel-btn">CANCEL</button>
            <button id="saveInviteBtn" class="save-btn">SAVE AND RETURN</button>
            </div>
        </div>
    </div>

            

    <script type="module" src="../js/caseManagement.js"></script>
    <script type="module" src="../js/createCase.js"></script>
    <script src="../../dist/bundle.js"></script>

    <script>
        document.querySelector(".logout").addEventListener("click", () => {
            localStorage.removeItem("loggedInUser"); // Ê∏ÖÈô§ÁôªÂΩï‰ø°ÊÅØ
            window.location.href = "../../index.html"; 
        });
    </script>  
</body>
</html>
